use Parser/ as PS/
use Nat/ as N/
use Result/ as R/

// Returns the current index of the parser state.
// = A Reply containing the current state and the current index.
PS/get-index : (PS/Parser N/Nat)
= Î»state
  let index = (PS/State/index state)
  #Done{#MkReply{
    state: state
    value: index
  }}
